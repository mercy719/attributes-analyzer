# ğŸš€ äº§å“å±æ€§å¢å¼ºå·¥å…·éƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### ç³»ç»Ÿè¦æ±‚
- Python 3.9+
- 2GB+ å†…å­˜
- 1GB+ ç£ç›˜ç©ºé—´
- ç¨³å®šçš„ç½‘ç»œè¿æ¥ï¼ˆè°ƒç”¨LLM APIï¼‰

### ç¯å¢ƒå˜é‡é…ç½®
åˆ›å»º `.env` æ–‡ä»¶ï¼ŒåŒ…å«ä»¥ä¸‹é…ç½®ï¼š

```env
# Flaské…ç½®
FLASK_ENV=production
SECRET_KEY=your-secret-key-here
PORT=5001
HOST=0.0.0.0

# APIé…ç½®
DEEPSEEK_API_KEY=your-deepseek-api-key-here

# æ–‡ä»¶å­˜å‚¨é…ç½®
UPLOAD_FOLDER=uploads
RESULT_FOLDER=results
TASKS_FILE=tasks.json

# æ€§èƒ½é…ç½®
MAX_RETRIES=3
RETRY_DELAY=2
MAX_WORKERS=5
TIMEOUT=300
```

---

## ğŸ¯ éƒ¨ç½²æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: Railwayéƒ¨ç½²ï¼ˆæ¨è - å…è´¹å¼€å§‹ï¼‰

**ä¼˜åŠ¿**: å…è´¹é¢åº¦ã€è‡ªåŠ¨HTTPSã€ç®€å•æ˜“ç”¨ã€æ”¯æŒæ–‡ä»¶å­˜å‚¨

#### æ­¥éª¤1: å‡†å¤‡ä»£ç ä»“åº“
```bash
# åˆå§‹åŒ–gitä»“åº“
git init
git add .
git commit -m "Initial commit"

# æ¨é€åˆ°GitHub
git remote add origin https://github.com/yourusername/air-styler-analysis.git
git branch -M main
git push -u origin main
```

#### æ­¥éª¤2: éƒ¨ç½²åˆ°Railway
1. è®¿é—® [Railway.app](https://railway.app)
2. ä½¿ç”¨GitHubè´¦å·ç™»å½•
3. ç‚¹å‡» "New Project" â†’ "Deploy from GitHub repo"
4. é€‰æ‹©ä½ çš„ä»“åº“
5. è®¾ç½®ç¯å¢ƒå˜é‡ï¼š
   - `DEEPSEEK_API_KEY`: ä½ çš„APIå¯†é’¥
   - `FLASK_ENV`: production
   - `SECRET_KEY`: éšæœºå­—ç¬¦ä¸²
6. ç‚¹å‡» "Deploy"

#### æ­¥éª¤3: é…ç½®åŸŸå
- Railwayä¼šè‡ªåŠ¨æä¾›åŸŸåï¼Œå¦‚ `your-app.railway.app`
- ä¹Ÿå¯ä»¥ç»‘å®šè‡ªå®šä¹‰åŸŸå

---

### æ–¹æ¡ˆ2: Renderéƒ¨ç½²ï¼ˆå…è´¹æ–¹æ¡ˆï¼‰

#### æ­¥éª¤1: å‡†å¤‡ä»£ç 
ç¡®ä¿ä»£ç å·²æ¨é€åˆ°GitHub

#### æ­¥éª¤2: éƒ¨ç½²åˆ°Render
1. è®¿é—® [Render.com](https://render.com)
2. è¿æ¥GitHubè´¦å·
3. åˆ›å»º "New Web Service"
4. é€‰æ‹©ä»“åº“
5. é…ç½®ï¼š
   - **Name**: air-styler-app
   - **Environment**: Python 3
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `gunicorn app:app --bind 0.0.0.0:$PORT --timeout 300`
6. æ·»åŠ ç¯å¢ƒå˜é‡
7. ç‚¹å‡» "Create Web Service"

---

### æ–¹æ¡ˆ3: Dockerå®¹å™¨éƒ¨ç½²

#### å¿«é€Ÿå¯åŠ¨
```bash
# ç»™éƒ¨ç½²è„šæœ¬æ‰§è¡Œæƒé™
chmod +x deploy.sh

# Dockeréƒ¨ç½²
./deploy.sh docker
```

#### æ‰‹åŠ¨Dockeréƒ¨ç½²
```bash
# æ„å»ºé•œåƒ
docker build -t air-styler-app .

# è¿è¡Œå®¹å™¨
docker run -d \
  --name air-styler-app \
  -p 5001:5001 \
  -v $(pwd)/uploads:/app/uploads \
  -v $(pwd)/results:/app/results \
  -e DEEPSEEK_API_KEY=your-api-key \
  air-styler-app

# æŸ¥çœ‹æ—¥å¿—
docker logs air-styler-app
```

---

### æ–¹æ¡ˆ4: äº‘æœåŠ¡å™¨éƒ¨ç½²ï¼ˆVPSï¼‰

#### é˜¿é‡Œäº‘/è…¾è®¯äº‘/AWSéƒ¨ç½²æ­¥éª¤

#### æ­¥éª¤1: è´­ä¹°æœåŠ¡å™¨
- é…ç½®: 2æ ¸2Gå†…å­˜ï¼Œ40GBç£ç›˜
- ç³»ç»Ÿ: Ubuntu 20.04+
- å¼€æ”¾ç«¯å£: 5001, 22, 80, 443

#### æ­¥éª¤2: æœåŠ¡å™¨è®¾ç½®
```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®‰è£…Pythonå’Œå¿…è¦å·¥å…·
sudo apt install python3 python3-pip python3-venv nginx git -y

# å…‹éš†ä»£ç 
git clone https://github.com/yourusername/air-styler-analysis.git
cd air-styler-analysis

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

#### æ­¥éª¤3: é…ç½®ç³»ç»ŸæœåŠ¡
åˆ›å»º `/etc/systemd/system/air-styler.service`ï¼š

```ini
[Unit]
Description=Air Styler Analysis App
After=network.target

[Service]
Type=simple
User=ubuntu
WorkingDirectory=/home/ubuntu/air-styler-analysis
Environment=PATH=/home/ubuntu/air-styler-analysis/venv/bin
ExecStart=/home/ubuntu/air-styler-analysis/venv/bin/gunicorn --bind 0.0.0.0:5001 --timeout 300 --workers 2 app:app
Restart=always

[Install]
WantedBy=multi-user.target
```

#### æ­¥éª¤4: å¯åŠ¨æœåŠ¡
```bash
# å¯åŠ¨æœåŠ¡
sudo systemctl daemon-reload
sudo systemctl start air-styler
sudo systemctl enable air-styler

# æ£€æŸ¥çŠ¶æ€
sudo systemctl status air-styler
```

#### æ­¥éª¤5: é…ç½®Nginxåå‘ä»£ç†
åˆ›å»º `/etc/nginx/sites-available/air-styler`ï¼š

```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    client_max_body_size 20M;
    
    location / {
        proxy_pass http://127.0.0.1:5001;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_read_timeout 300;
        proxy_connect_timeout 300;
        proxy_send_timeout 300;
    }
}
```

```bash
# å¯ç”¨é…ç½®
sudo ln -s /etc/nginx/sites-available/air-styler /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

---

## ğŸ”§ ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–

### æ€§èƒ½ä¼˜åŒ–
1. **å¢åŠ Gunicornå·¥ä½œè¿›ç¨‹**
```bash
gunicorn --workers 4 --worker-class sync --timeout 300 app:app
```

2. **é…ç½®Redisç¼“å­˜**ï¼ˆå¯é€‰ï¼‰
```bash
sudo apt install redis-server
```

3. **é…ç½®æ–‡ä»¶å­˜å‚¨**
- ä½¿ç”¨äº‘å­˜å‚¨ï¼ˆAWS S3, é˜¿é‡Œäº‘OSSç­‰ï¼‰
- æˆ–è€…é…ç½®å…±äº«æ–‡ä»¶ç³»ç»Ÿ

### å®‰å…¨è®¾ç½®
1. **HTTPSé…ç½®**
```bash
# å®‰è£…Certbot
sudo apt install certbot python3-certbot-nginx -y

# è·å–SSLè¯ä¹¦
sudo certbot --nginx -d your-domain.com
```

2. **é˜²ç«å¢™é…ç½®**
```bash
sudo ufw allow 22
sudo ufw allow 80
sudo ufw allow 443
sudo ufw enable
```

3. **ç¯å¢ƒå˜é‡å®‰å…¨**
- ä½¿ç”¨å¼ºå¯†ç ä½œä¸ºSECRET_KEY
- å®šæœŸæ›´æ–°APIå¯†é’¥
- ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç å¯†é’¥

### ç›‘æ§å’Œæ—¥å¿—
1. **è®¾ç½®æ—¥å¿—è½®è½¬**
```bash
sudo nano /etc/logrotate.d/air-styler
```

2. **ç›‘æ§æœåŠ¡çŠ¶æ€**
```bash
# æŸ¥çœ‹åº”ç”¨çŠ¶æ€
sudo systemctl status air-styler

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u air-styler -f
```

---

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ç«¯å£è¢«å ç”¨
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
sudo netstat -tulpn | grep :5001

# æ€æ­»å ç”¨è¿›ç¨‹
sudo kill -9 PID
```

#### 2. æƒé™é—®é¢˜
```bash
# ä¿®æ”¹æ–‡ä»¶æƒé™
sudo chown -R ubuntu:ubuntu /path/to/app
chmod +x deploy.sh
```

#### 3. å†…å­˜ä¸è¶³
```bash
# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
free -h

# åˆ›å»ºäº¤æ¢æ–‡ä»¶
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
```

#### 4. APIè°ƒç”¨å¤±è´¥
- æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- æŸ¥çœ‹APIä½¿ç”¨é™åˆ¶

---

## ğŸ“Š éƒ¨ç½²æˆæœ¬ä¼°ç®—

| æ–¹æ¡ˆ | æœˆè´¹ç”¨ | é€‚ç”¨åœºæ™¯ | ä¼˜åŠ¿ |
|------|--------|----------|------|
| Railway | å…è´¹-$5 | ä¸ªäººä½¿ç”¨ | ç®€å•æ˜“ç”¨ |
| Render | å…è´¹-$7 | å°å›¢é˜Ÿ | è‡ªåŠ¨éƒ¨ç½² |
| VPS | $5-20 | ç”Ÿäº§ç¯å¢ƒ | å®Œå…¨æ§åˆ¶ |
| Docker | $5-15 | ä¼ä¸šçº§ | å¯æ‰©å±• |

---

## ğŸ‰ éƒ¨ç½²å®Œæˆæ£€æŸ¥

### éªŒè¯æ¸…å•
- [ ] åº”ç”¨èƒ½æ­£å¸¸è®¿é—®
- [ ] æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½æ­£å¸¸
- [ ] LLM APIè°ƒç”¨æˆåŠŸ
- [ ] ä»»åŠ¡å¤„ç†æ­£å¸¸
- [ ] æ–‡ä»¶ä¸‹è½½åŠŸèƒ½æ­£å¸¸
- [ ] HTTPSé…ç½®æ­£ç¡®ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- [ ] å®šæœŸå¤‡ä»½è®¾ç½®å®Œæˆ

### æµ‹è¯•æ­¥éª¤
1. è®¿é—®åº”ç”¨ä¸»é¡µ
2. ä¸Šä¼ æµ‹è¯•æ–‡ä»¶
3. é…ç½®å±æ€§æå–
4. æ£€æŸ¥å¤„ç†ç»“æœ
5. ä¸‹è½½ç»“æœæ–‡ä»¶

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š
1. æ£€æŸ¥æ—¥å¿—æ–‡ä»¶
2. ç¡®è®¤ç¯å¢ƒå˜é‡è®¾ç½®
3. éªŒè¯ç½‘ç»œè¿æ¥
4. æŸ¥çœ‹ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ

**éƒ¨ç½²æˆåŠŸåï¼Œä½ çš„äº§å“å±æ€§å¢å¼ºå·¥å…·å°±å¯ä»¥ä¸ºå…¨çƒç”¨æˆ·æä¾›æœåŠ¡äº†ï¼** ğŸ‰ 